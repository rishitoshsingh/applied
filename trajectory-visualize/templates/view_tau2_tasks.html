<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>TAU 2 Tasks Viewer</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .json-block {
            background: #f8f8f8;
            border-radius: 6px;
            padding: 1em;
            font-family: monospace;
            white-space: pre-wrap;
        }

        .meta-label {
            font-weight: bold;
        }
    </style>
</head>

<body class="bg-light">
    <div class="container py-4">
        <h2 class="mb-4">TAU 2 Tasks Viewer</h2>
        <div class="mb-3"><a href="/">&larr; Back</a> <span class="text-muted small ms-2">Viewing: {{ file_path
                }}</span></div>
        <div class="accordion" id="tasksAccordion">
            {% for task in data %}
            <div class="accordion-item">
                <h2 class="accordion-header" id="heading-{{ loop.index }}">
                    <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                        data-bs-target="#collapse-{{ loop.index }}" aria-expanded="false"
                        aria-controls="collapse-{{ loop.index }}">
                        Task ID: {{ task.id }}
                        <span class="ms-auto text-muted small">Domain: {{ task.user_scenario.instructions.domain if
                            task.user_scenario.instructions.domain else 'N/A' }}</span>
                    </button>
                </h2>
                <div id="collapse-{{ loop.index }}" class="accordion-collapse collapse"
                    aria-labelledby="heading-{{ loop.index }}" data-bs-parent="#tasksAccordion">
                    <div class="accordion-body">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <h5>Description</h5>
                                <div class="json-block">
                                    <div><span class="meta-label">Purpose:</span> {{ task.description.purpose }}</div>
                                    <div><span class="meta-label">Notes:</span> {{ task.description.notes if
                                        task.description.notes else 'N/A' }}</div>
                                </div>
                                <h5 class="mt-3">User Scenario</h5>
                                <div class="json-block">
                                    <div><span class="meta-label">Instructions:</span><br>{{
                                        task.user_scenario.instructions.task_instructions }}</div>
                                    <div><span class="meta-label">Reason for Call:</span> {{
                                        task.user_scenario.instructions.reason_for_call }}</div>
                                    <div><span class="meta-label">Known Info:</span> {{
                                        task.user_scenario.instructions.known_info }}</div>
                                    <div><span class="meta-label">Unknown Info:</span> {{
                                        task.user_scenario.instructions.unknown_info if
                                        task.user_scenario.instructions.unknown_info else 'N/A' }}</div>
                                </div>
                            </div>
                            <div class="col-md-6 mb-3">
                                <h5>Evaluation Criteria</h5>
                                <div class="json-block">
                                    <div><span class="meta-label">Actions:</span>
                                        <pre>{{ task.evaluation_criteria.actions | tojson(indent=2) }}</pre>
                                    </div>
                                    <div><span class="meta-label">Communicate Info:</span>
                                        <pre>{{ task.evaluation_criteria.communicate_info | tojson(indent=2) }}</pre>
                                    </div>
                                    <div><span class="meta-label">Assertions:</span>
                                        <pre>{{ task.evaluation_criteria.nl_assertions | tojson(indent=2) }}</pre>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>